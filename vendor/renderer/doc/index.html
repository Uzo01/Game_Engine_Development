<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Renderer: 2D Renderer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Renderer
   </div>
   <div id="projectbrief">Renderer for IMAT3405</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">2D Renderer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>Overview</h3>
<p>This provides basic 2D rendering capabilties using OpenGL. You can use this if you did not have a renderer at the end of IMAT3904. you will however need a working window with an event system and an OpenGL graphics context. The code is provided as a compiled shared libraries with accompanying header files. The library files are compiled as x64 under windows using Visual Studio 2019.</p>
<h3>Using this Renderer in your project</h3>
<p>This section will tell you how to get your project to build with the supplied renderer. It is assumed you are running a x64 Windows PC using Visual Studio 2019.</p>
<h4>Adding to your vendor directory</h4>
<p>Copy the renderer directory into your vendor directory. You should have the following files in the following directories: </p><div class="fragment"><div class="line">\vendor\renderer\include\renderer2d.h</div>
<div class="line">\vendor\renderer\include\texture.h</div>
<div class="line">\vendor\renderer\lib\Renderer.lib</div>
<div class="line">\vendor\renderer\lib\RendererD.lib</div>
</div><!-- fragment --><h4>Adding to your Premake build script</h4>
<p>First you will need to add the include directory to the Engine project. See the bottom line, you may have more include directories: </p><div class="fragment"><div class="line">includedirs</div>
<div class="line">    {</div>
<div class="line">        &quot;%{prj.name}/enginecode/&quot;,</div>
<div class="line">        &quot;%{prj.name}/enginecode/include/independent&quot;,</div>
<div class="line">        &quot;%{prj.name}/enginecode/include/&quot;,</div>
<div class="line">        &quot;%{prj.name}/precompiled/&quot;,</div>
<div class="line">        &quot;vendor/spdlog/include&quot;,</div>
<div class="line">        &quot;vendor/glfw/include&quot;,</div>
<div class="line">        &quot;vendor/Glad/include&quot;,</div>
<div class="line">        &quot;vendor/glm/&quot;,</div>
<div class="line">        &quot;vendor/renderer/include&quot;</div>
<div class="line">    }</div>
</div><!-- fragment --><p> Next add a libdirs (library directories) section to your Engine project before any filters </p><div class="fragment"><div class="line">libdirs </div>
<div class="line">{</div>
<div class="line">        &quot;./vendor/renderer/lib&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Finally the library files need to be added to the respective configuration filters: </p><div class="fragment"><div class="line">filter &quot;configurations:Debug&quot;</div>
<div class="line">    defines &quot;NG_DEBUG&quot;</div>
<div class="line">    runtime &quot;Debug&quot;</div>
<div class="line">    symbols &quot;On&quot;</div>
<div class="line">    links </div>
<div class="line">    {</div>
<div class="line">        &quot;RendererD&quot;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">filter &quot;configurations:Release&quot;</div>
<div class="line">    defines &quot;NG_RELEASE&quot;</div>
<div class="line">    runtime &quot;Release&quot;</div>
<div class="line">    optimize &quot;On&quot;</div>
<div class="line">    links </div>
<div class="line">    {</div>
<div class="line">        &quot;Renderer&quot;</div>
<div class="line">    }</div>
</div><!-- fragment --><p>This has included the header files and the correct library files for Debug and Release builds.</p>
<h4>Example code</h4>
<p>This example provides a minimal example of using the renderer with code from IMAT3904. You should copy the relevant sections from this code into you application.cpp file, adjusting variable names as required.</p>
<div class="fragment"><div class="line">/** \file application.cpp</div>
<div class="line">*/</div>
<div class="line"> </div>
<div class="line">#include &quot;engine_pch.h&quot;</div>
<div class="line">#include &quot;core/application.h&quot;</div>
<div class="line"> </div>
<div class="line">#ifdef NG_PLATFORM_WINDOWS</div>
<div class="line">#include &quot;platform/GLFW/GLFWSystem.h&quot;</div>
<div class="line">#endif</div>
<div class="line"> </div>
<div class="line">#include &quot;renderer2D.h&quot;</div>
<div class="line">#include &lt;glm/glm.hpp&gt;</div>
<div class="line">#include &lt;glm/gtc/matrix_transform.hpp&gt;</div>
<div class="line"> </div>
<div class="line">namespace Engine {</div>
<div class="line">    // Set static vars</div>
<div class="line">    Application* Application::s_instance = nullptr;</div>
<div class="line"> </div>
<div class="line">    Application::Application()</div>
<div class="line">    {</div>
<div class="line">        if (s_instance == nullptr)</div>
<div class="line">        {</div>
<div class="line">            s_instance = this;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        // Start systems</div>
<div class="line"> </div>
<div class="line">        //Start log</div>
<div class="line">        m_logSystem.reset(new Log);</div>
<div class="line">        m_logSystem-&gt;start();</div>
<div class="line"> </div>
<div class="line">        // Start the windows System</div>
<div class="line">        m_windowsSystem.reset(new GLFWSystem);</div>
<div class="line">        m_windowsSystem-&gt;start();</div>
<div class="line"> </div>
<div class="line">        // Start timer (not a system)</div>
<div class="line">        m_timer.reset(new ChronoTimer);</div>
<div class="line">        m_timer-&gt;start();</div>
<div class="line"> </div>
<div class="line">        m_window.reset(Window::create());</div>
<div class="line">        </div>
<div class="line">        m_window-&gt;getEventHandler().setOnCloseCallback(std::bind(&amp;Application::onClose, this, std::placeholders::_1));</div>
<div class="line">        m_window-&gt;getEventHandler().setOnResizeCallback(std::bind(&amp;Application::onResize, this, std::placeholders::_1));</div>
<div class="line">        m_window-&gt;getEventHandler().setOnButtonPressedCallback(std::bind(&amp;Application::onMouseButtonPressed, this, std::placeholders::_1));</div>
<div class="line"> </div>
<div class="line">        InputPoller::setNativeWindow(m_window-&gt;getNativeWindow());</div>
<div class="line"> </div>
<div class="line">        IMAT3905::Renderer2D::init(</div>
<div class="line">            m_window-&gt;getWidth(),       // Window width</div>
<div class="line">            m_window-&gt;getHeight(),      // Window height</div>
<div class="line">            20000,                      // Batch size i.e. 20000 things rendered in one batch</div>
<div class="line">            &quot;./assets/fonts/arial.ttf&quot;, // Font file location</div>
<div class="line">            64                          // Character size to load font</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        IMAT3905::Renderer2D::setClearColour({ 1.f,0.f,1.f,1.f });</div>
<div class="line">        m_timer-&gt;reset();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    void Application::onClose(WindowCloseEvent &amp; e)</div>
<div class="line">    {</div>
<div class="line">        m_running = false;</div>
<div class="line">        e.handle(true);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    void Application::onResize(WindowResizeEvent &amp; e)</div>
<div class="line">    {</div>
<div class="line">        m_window-&gt;onResize(e);</div>
<div class="line">        IMAT3905::Renderer2D::onResize(e.getSize());</div>
<div class="line">        e.handle(true);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    void Application::onMouseButtonPressed(MouseButtonPressedEvent&amp; e)</div>
<div class="line">    {</div>
<div class="line">        auto id = IMAT3905::Renderer2D::getID(InputPoller::getMousePosition());</div>
<div class="line">        Log::info(&quot;Entity ID: {0}&quot;, id);</div>
<div class="line">        e.handle(true);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    Application::~Application()</div>
<div class="line">    {</div>
<div class="line">        // Stop systems</div>
<div class="line"> </div>
<div class="line">        // Stop windows system</div>
<div class="line">        m_windowsSystem-&gt;stop();</div>
<div class="line">        // Stop logger</div>
<div class="line">        m_logSystem-&gt;stop();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    void Application::run()</div>
<div class="line">    {</div>
<div class="line">        IMAT3905::Texture numbers(&quot;./assets/textures/numberCube.png&quot;);</div>
<div class="line">        IMAT3905::Texture letters(&quot;./assets/textures/letterCube.png&quot;);</div>
<div class="line">        IMAT3905::SubTexture five(numbers, glm::vec2(0.33f, 0.5f), glm::vec2(0.66f, 1.0f));</div>
<div class="line">        IMAT3905::SubTexture e(letters, glm::ivec2(100, 100), glm::ivec2(200, 200));</div>
<div class="line"> </div>
<div class="line">        glm::mat4 view = glm::mat4(1.f);</div>
<div class="line">        glm::mat4 proj = glm::ortho(0.f, m_window-&gt;getWidthf(), m_window-&gt;getHeightf(), 0.f);</div>
<div class="line"> </div>
<div class="line">        while (m_running)</div>
<div class="line">        {</div>
<div class="line">            m_timestep = m_timer-&gt;getElapsedTime();</div>
<div class="line">            m_timer-&gt;reset();</div>
<div class="line"> </div>
<div class="line">            IMAT3905::Renderer2D::begin(view, proj);</div>
<div class="line"> </div>
<div class="line">            IMAT3905::Renderer2D::submit({ 512,400 }, 0.f, { 50,25 }, glm::vec4(1.f), 0);</div>
<div class="line">            IMAT3905::Renderer2D::submit({ 150,100 }, 0.f, { 100,75 }, numbers, 1);</div>
<div class="line">            IMAT3905::Renderer2D::submit({ 300,250 }, 0.f, { 100,75 }, letters, 2);</div>
<div class="line">            IMAT3905::Renderer2D::submit({ 512,100 }, 30.f, { 50,25 }, glm::vec4(1.f, 0, 0, 1), 3, true);</div>
<div class="line">            IMAT3905::Renderer2D::submit({ 250,500 }, glfwGetTime() * 15.f, { 60,60 }, five, 4, true);</div>
<div class="line">            IMAT3905::Renderer2D::submit({ 600,250 }, glfwGetTime() * -25.f, { 75,75 }, e, 5, true);</div>
<div class="line"> </div>
<div class="line">            IMAT3905::Renderer2D::end();</div>
<div class="line">            m_window-&gt;onUpdate(m_timestep);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        IMAT3905::Renderer2D::terminate();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Entity IDs</h3>
<p>The renderer renders to multiple targets in a single render pass. This allows the entity ID of each thing drawn to be stored and retrieved through a texture attachment. Entity IDs are passed as signed integers in the <code>submit</code> methods, with -1 representing an invalid or null entity ID. The example above does this in in the <code>onMouseButtonPressed</code> method. If you are renderering transparent objects the captured entity will be the last object rendered. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
